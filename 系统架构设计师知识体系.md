# 系统架构设计师知识体系

- 操作系统
- 数据库系统
- 嵌入式系统
- 数据通信与计算机网络
- 多媒体基础知识
- 系统性能评价
- 信息系统基础知识
- 系统开发基础知识
- 面向对象方法
- 基于构建的开发
- 开发管理
- 软件架构设计
- 系统安全性和保密性
- 系统可靠性
- 分布式系统
- 知识产权与法律法规
- 标准化知识
- 应用数学
- 虚拟化、云化与物联网
- 专业英语

## 操作系统

操作系统（Operating System，OS）是计算机系统中的核心系统软件，负责管理和控制计算机系统中的硬件和软件资源，合理地组织计算机工作流程和有效地利用资源，在计算机与用户之间起接口的作用。

### 操作系统分类

- 批处理操作系统
- 分时操作系统
- 实时操作系统
- 网络操作系统
- 分布式操作系统
- 嵌入式操作系统

1、批处理操作系统

两个特点：
    - “多道”，指系统内可同时容纳多个作业
    - “成批”，指系统能成批地自动运行多个作业，在运行过程中不允许用户与作业发生交互作用

2、分时操作系统

一台计算机连接多个终端，系统把CPU时间分为若干时间片，采用时间片轮转的方式处理用户的服务请求。对每个用户能保证足够快的相应时间，并提供交互会话能力。

3、实时操作系统

“实时”是指及时响应随机发生的外部事件的请求，并以足够快的速度完成对外部事件的处理，控制所有实时设备和实时任务协调一致的运行。
实时系统包括：实时控制系统和实时处理系统。
实时系统的主要特点是及时性和可靠性。

4、网络操作系统

网络操作系统（Network Operating System，NOS），建立在各节点计算机的操作系统之上，用于管理网络通信和共享资源，协调各节点计算机上任务的运行，并向用户提供统一、有效的网络接口的一组系统软件。
它应具有4个基本功能：
    - 网络通信
    - 资源管理
    - 提供多种网络服务
    - 提供网络接口

5、分布式操作系统

在多计算机系统环境下，负责控制和管理以协同方式工作的各类系统资源和分布式进程的同步，并执行和处理机间的通信、调度与分配等控制事务，自动实行全系统范围内的任务分配和负载平衡。

6、嵌入式操作系统

嵌入式操作系统是指将操作系统和功能软件集成于计算机硬件系统中，系统软件与硬件一体化，具有软件体积小、高度自动化、响应速度快等特点。
以应用为中心，以计算机技术为基础，软硬件可裁剪，对功能、可靠性、成本、体积、功耗严格要求的专用计算机系统。

7、微内核操作系统

将操作系统中最基本的部分放入内核中，而把操作系统的绝大部分功能都放在微内核外面的一组服务器中实现。这样使得操作系统内核变得非常小，自然提高了系统的可扩展性，增强了系统的可靠性和可移植性。同时微内核系统为分布式系统提供了支持，融入了面向对象技术。
但在运行效率方面它就不如以前传统的操作系统。

### 操作系统基本原理

操作系统的主要功能是进行处理机与进程管理、存储管理、设备管理、文件管理和作业管理的工作。

#### 进程管理

1、进程的概念

程序并行执行具有如下特征：

- 并发性。即并发程序的若干个程序段同时在系统中运行，这些程序段的执行在时间上是重叠的。
- 动态性。指程序与其执行活动不再一一对应。并发程序中的并发活动是动态产生、动态消亡的。
- 开放性。指系统中并发执行的程序共享使用的资源，程序的执行与外部因素（如执行速度）相关，不再具有封闭性。
- 相互制约性。指程序的动态活动相互依赖、相互制约。

2、进程的定义和分类

进程不同类别：

- 系统进程和用户进程
- 父进程和子进程

3、进程的状态转换

进程至少具有以下三种状态：

- 就绪状态。进程已分配了除CPU以外的所有必要的资源后，只要能活动处理机，便能立即执行。
- 执行状态。进程已获得处理机，其程序正在执行。
- 阻塞状态。进程因发生某事件（如请求I/O、申请缓冲空间等）而暂停执行时的状态，亦即进程的执行收到阻塞。有时也成为“等待”状态，或“睡眠”状态。通常将处于阻塞状态的进程排成一个队列，成为阻塞队列。

进程状态的变化：

- 运行态 -> 等待态：一个进程启动了外围设备，变成等待外围设备传输信息的状态；进程在运行中申请资源（主存储空间及外围设备得不到满足）时，变成等待资源状态；进程在运行中出现了故障（程序出错或主存储器读写错误等），变成等待干预状态。
- 等待态 -> 就绪态：外围设备工作结束后等待外围设备传输信息的进程结束等待；等待的资源能够得到满足时（另一个进程归还了资源），则等待资源者就结束等待；故障排除后让等待干预的进程结束等待，任何一个结束等待的进程必须先变成就绪状态，待分配到处理器后才能运行。
- 运行态 -> 就绪态：进程用完了一个使用处理器的时间后强迫该进程暂时让出处理器，当有更优先权的进程要运行时也迫使正在运行的进程让出处理器。由于自身或外界原因成为等待状态的进程让出处理器时，它的状态就变成就绪状态。
- 就绪态 -> 运行态：等待分配处理器的进程，系统按一种选定的策略从处于就绪状态的进程中选择一个进程，让它占用处理器，那个被选中的进程就变成了运行态。

4、挂起状态

在不少系统中又增加了一些新的状态，其中最重要的是挂起状态。
引入挂起状态的原因：

- 对换的需要。为了缓解内存紧张的情况，而将内存中处于阻塞状态的进程换至外存上，使进程又处于一种有别于阻塞状态的新状态。
- 终端用户的请求。发现有可以问题时，将进程暂停。
- 父进程请求。父进程常希望挂起自己的子进程，以便考察和修改子进程，或者协调各子进程间的活动。
- 负荷调节的需要。当实时系统中的工作负荷较重，有可能影响到实时任务的控制时，可由系统把一些不重要的进程挂起，以保证系统正常运行。
- 操作系统的需要。操作系统希望挂起某些进程，以便检查运行中资源的使用情况及进行记账。

挂起状态具有以下三个属性：

- 被挂起的进程，原来可能处于就绪状态，此时进程的状态成为挂起就绪；原来处于阻塞状态，挂起后成为挂起阻塞。
- 处于挂起阻塞状态的进程，其阻塞条件与挂起条件无关。
- 进程可以由自身挂起，也可由用户或操作系统等将之挂起。

5、进程互斥与同步

进程互斥的定义：
一组并发程序中一个或多个程序段，因共享某一共有资源而导致必须以一个不允许交叉执行的单元执行。也就是说互斥是要保证临界资源在某一时刻只被一个进程访问。

将一次仅允许一个进程访问的资源称为**临界资源**。把一个进程访问临界资源的那段程序代码成为**临界区**。进程间的互斥可以描述为：禁止两个或两个以上的进程同时进入访问同一临界资源的临界区。

因此必须由专门的同步机构做协调，协调准则如下：

- 空闲让忙。当无进程在临界区时，若有进程要求进入临界区则立即允许其进入。
- 忙则等待。当已有进程进入临界区时，其他试图进入各自临界区的进程必须等待，以保证诸进程互斥地进入临界区。
- 有限等待。由若干进程要求进入临界区时，应在有限时间内使一进程进入临界区，即它们不应相互等待而谁也不进入临界区。
- 让权等待。对于等待进入临界区的进程必须释放其占用的CPU。

信号量可以有效地实现进程的同步和互斥。
在操作系统中，信号量是一个整数。当信号量大于等于0时，代表可供并发进程使用的资源实体数，当信号量小于0时则表示正在等待使用临界区的进程数。
对信号量只能施加特殊操作：P操作和V操作。
P(sem)操作是将信号量sem值减1，若sem的值成负数，则调用P操作的进程暂停执行，直到另一个进程对同一信号量做V操作。
V(sem)操作是将信号量sem值加1，若sem的值小于等于0，从相应队列（与sem有关的队列）中选择一个进程，唤醒它。

一般P操作和V操作的定义如下所述。

```
P操作：
P (sem) {
    sem = sem - 1;
    if (sem < 0) 进程进入等待状态;
    else 继续进行;
}

V操作：
V (sem) {
    sem = sem + 1;
    if (sem < 0>) 唤醒队列中的一个等待进程;
    else 继续进行;
}
```

6、进程调度与死锁

进程调度算法：

- 先来先服务（FCFS）调度算法
- 优先数调度。就绪进程按照优先级排队。
- 轮转法（Round Robin）。就绪队列按照FCFS方式排队，每个进程执行一次占有处理器时间都不超过规定时间单位（时间片），若超过则自行释放自己所占有的CPU而排队就绪队列尾部，等待下一次调度。

产生死锁的必要条件：

- 互斥条件
- 保持和等待条件
- 不剥夺条件
- 环路等待条件呢

解决死锁的两种策略：

- 在死锁发生前采用的预防和避免策略。死锁避免算法（典型的如**银行家算法**）
- 在死锁发生后采用的检测与恢复策略

7、线程

线程是进程中的一个实体，是系统实施调度的独立单位。
线程中只拥有一些在运行中必不可少的资源，它与属于同一个进程的其他线程共享该进程所拥有的资源。

#### 存储管理

#### 设备管理

#### 文件管理

#### 作业管理
